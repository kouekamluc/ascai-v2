{% load i18n %}
<!-- Event List Items -->
{% for event in events %}
<div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition">
    {% if event.image %}
    <img src="{{ event.image.url }}" alt="{{ event.title }}" class="w-full h-48 object-cover">
    {% endif %}
    <div class="p-6">
        <div class="text-sm text-gray-500 mb-2">
            ğŸ“… {{ event.start_datetime|date:"d M Y, H:i" }}
        </div>
        <h3 class="text-xl font-semibold mb-2">
            <a href="{% url 'diaspora:event_detail' event.slug %}" class="hover:text-cameroon-green">
                {{ event.title }}
            </a>
        </h3>
        <p class="text-gray-600 mb-2">{{ event.description|truncatewords:15|striptags }}</p>
        <p class="text-sm text-gray-500">ğŸ“ {{ event.location }}</p>
        {% if event.registration_required %}
        <span class="inline-block mt-2 px-3 py-1 bg-cameroon-green/10 text-cameroon-green text-sm rounded-full">
            {% trans 'Registration Required' %}
        </span>
        {% endif %}
    </div>
</div>
{% endfor %}

<!-- HTMX Pagination Trigger -->
{% if page_obj.has_next %}
<div 
    hx-get="{% url 'diaspora:event_list' %}?page={{ page_obj.next_page_number }}{% if request.GET.date_filter %}&date_filter={{ request.GET.date_filter }}{% endif %}{% if request.GET.language %}&language={{ request.GET.language }}{% endif %}"
    hx-trigger="revealed"
    hx-swap="beforeend"
    hx-target="#event-list"
    class="col-span-3"
>
    <div class="text-center py-4">
        <div class="htmx-indicator inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-cameroon-green"></div>
        <p class="mt-2 text-gray-600">{% trans 'Loading more events...' %}</p>
    </div>
</div>
{% endif %}

