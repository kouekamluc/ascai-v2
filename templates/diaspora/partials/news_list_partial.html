{% load i18n %}
<!-- News List Items -->
{% for news in news_list %}
<div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition">
    {% if news.image %}
    <img src="{{ news.image.url }}" alt="{{ news.title }}" class="w-full h-48 object-cover">
    {% endif %}
    <div class="p-6">
        <span class="text-sm text-gray-500">{{ news.published_at|date:"d M Y" }}</span>
        <h3 class="text-xl font-semibold mt-2 mb-2">
            <a href="{% url 'diaspora:news_detail' news.slug %}" class="hover:text-cameroon-green">
                {{ news.title }}
            </a>
        </h3>
        <p class="text-gray-600">{{ news.content|truncatewords:20|striptags }}</p>
        <span class="inline-block mt-2 px-3 py-1 bg-cameroon-green/10 text-cameroon-green text-sm rounded-full">
            {{ news.get_category_display }}
        </span>
    </div>
</div>
{% endfor %}

<!-- HTMX Pagination Trigger -->
{% if page_obj.has_next %}
<div 
    hx-get="{% url 'diaspora:news_list' %}?page={{ page_obj.next_page_number }}{% if request.GET.category %}&category={{ request.GET.category }}{% endif %}{% if request.GET.language %}&language={{ request.GET.language }}{% endif %}"
    hx-trigger="revealed"
    hx-swap="beforeend"
    hx-target="#news-list"
    class="col-span-3"
>
    <div class="text-center py-4">
        <div class="htmx-indicator inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-cameroon-green"></div>
        <p class="mt-2 text-gray-600">{% trans 'Loading more news...' %}</p>
    </div>
</div>
{% endif %}

