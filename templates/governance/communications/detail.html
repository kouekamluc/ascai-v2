{% extends "governance/base.html" %}
{% load i18n %}

{% block title %}{{ communication.title }} - {{ block.super }}{% endblock %}

{% block page_heading %}{{ communication.title }}{% endblock %}

{% block content %}
<div class="governance-card mb-6">
    <div class="flex items-center justify-between mb-4">
        <div>
            <span class="px-3 py-1 rounded text-sm font-semibold
                {% if communication.is_published %}bg-green-100 text-green-800
                {% elif communication.president_approved %}bg-blue-100 text-blue-800
                {% else %}bg-yellow-100 text-yellow-800{% endif %}">
                {% if communication.is_published %}{% trans "Published" %}
                {% elif communication.president_approved %}{% trans "Approved" %}
                {% else %}{% trans "Pending Approval" %}{% endif %}
            </span>
        </div>
        <div class="flex space-x-2">
            {% if communication.requires_president_approval and not communication.president_approved and perms.governance.manage_executive_board %}
            <form method="post" action="{% url 'governance:approve_communication' communication.pk %}" class="inline">
                {% csrf_token %}
                <button type="submit" class="btn-primary">{% trans "Approve" %}</button>
            </form>
            {% endif %}
            {% if communication.president_approved and not communication.is_published %}
            <form method="post" action="{% url 'governance:publish_communication' communication.pk %}" class="inline">
                {% csrf_token %}
                <button type="submit" class="btn-primary">{% trans "Publish" %}</button>
            </form>
            {% endif %}
        </div>
    </div>
    <div class="prose max-w-none">
        <p class="text-sm text-gray-600 mb-4">{{ communication.get_communication_type_display }} | {{ communication.get_target_audience_display }}</p>
        <div class="text-gray-900">{{ communication.content|linebreaks }}</div>
    </div>
</div>
{% endblock %}

