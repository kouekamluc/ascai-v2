{% extends 'base.html' %}
{% load i18n %}

{% block title %}{{ scholarship.title }} - ASCAI Lazio{% endblock %}

{% block extra_css %}
<style>
    .detail-hero {
        background: linear-gradient(135deg, #007A5E 0%, #005a45 100%);
        position: relative;
        overflow: hidden;
    }
    .detail-hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        opacity: 0.3;
    }
    .info-card {
        background: white;
        border-radius: 1rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        border: 1px solid #e5e7eb;
        padding: 1.5rem;
        transition: all 0.3s ease;
    }
    .info-card:hover {
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
    .section-divider {
        border-top: 2px solid #e5e7eb;
        margin: 2rem 0;
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="detail-hero text-white py-12 mb-8">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="flex items-start justify-between">
            <div class="flex-1">
                {% if scholarship.is_disco_lazio %}
                <div class="inline-flex items-center px-4 py-2 bg-white/20 backdrop-blur-sm rounded-full mb-4 border border-white/30">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 01.557 1.08l1.524 4.851a2 2 0 01-1.617 2.53l-1.099.26a1 1 0 01-.98-.314l-1.002-1.003a.996.996 0 00-.578-.23l-5-.001a1 1 0 01-1-1v-5.48a1 1 0 01.19-.571l3.5-4.5a1 1 0 011.242-.14l5.5 3.5a1 1 0 01.356.257l4 1.714zm-2.95-1.07a.5.5 0 01.788 0l7 3a.5.5 0 010 .94l-7 3a.5.5 0 01-.788 0l-7-3a.5.5 0 010-.94l7-3z"/>
                    </svg>
                    <span class="font-bold text-sm">DISCO Lazio Scholarship</span>
                </div>
                {% endif %}
                <h1 class="text-4xl md:text-5xl font-bold mb-4">{{ scholarship.title }}</h1>
                <div class="flex items-center text-white/90">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                    </svg>
                    <span class="text-lg font-medium">{{ scholarship.provider }}</span>
                </div>
            </div>
            {% if user.is_authenticated %}
            <form hx-post="{% url 'scholarships:toggle_save' scholarship.slug %}" hx-target="#save-button" hx-swap="outerHTML" class="ml-4">
                {% csrf_token %}
                <div id="save-button">
                    {% if is_saved %}
                    <button type="submit" 
                            class="inline-flex items-center px-6 py-3 bg-white/20 backdrop-blur-sm text-white rounded-lg hover:bg-white/30 transition-all border border-white/30"
                            title="{% trans 'Remove from saved' %}">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
                        </svg>
                        {% trans 'Saved' %}
                    </button>
                    {% else %}
                    <button type="submit" 
                            class="inline-flex items-center px-6 py-3 bg-white/20 backdrop-blur-sm text-white rounded-lg hover:bg-white/30 transition-all border border-white/30"
                            title="{% trans 'Save scholarship' %}">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                        </svg>
                        {% trans 'Save' %}
                    </button>
                    {% endif %}
                </div>
            </form>
            {% endif %}
        </div>
    </div>
</div>

<div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pb-16">
    <!-- Key Information Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
        {% if scholarship.amount %}
        <div class="info-card">
            <div class="flex items-center mb-2">
                <div class="p-3 bg-emerald-100 rounded-lg mr-3">
                    <svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
                <span class="text-sm font-semibold text-gray-600">{% trans 'Amount' %}</span>
            </div>
            <p class="text-2xl font-bold text-emerald-700">
                {{ scholarship.amount|floatformat:0 }} {{ scholarship.currency }}
            </p>
        </div>
        {% endif %}
        
        {% if scholarship.application_deadline %}
        <div class="info-card">
            <div class="flex items-center mb-2">
                <div class="p-3 bg-blue-100 rounded-lg mr-3">
                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                    </svg>
                </div>
                <span class="text-sm font-semibold text-gray-600">{% trans 'Deadline' %}</span>
            </div>
            <p class="text-2xl font-bold text-gray-900">
                {{ scholarship.application_deadline|date:"d M Y" }}
            </p>
        </div>
        {% endif %}
        
        <div class="info-card">
            <div class="flex items-center mb-2">
                <div class="p-3 bg-purple-100 rounded-lg mr-3">
                    <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                    </svg>
                </div>
                <span class="text-sm font-semibold text-gray-600">{% trans 'Level' %}</span>
            </div>
            <p class="text-2xl font-bold text-gray-900">
                {{ scholarship.get_level_display }}
            </p>
        </div>
    </div>
    
    <!-- Badges -->
    <div class="flex flex-wrap gap-3 mb-8">
        {% if scholarship.level != 'all' %}
        <span class="inline-flex items-center px-4 py-2 bg-blue-50 text-blue-700 rounded-lg text-sm font-semibold border border-blue-200">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
            </svg>
            {{ scholarship.get_level_display }}
        </span>
        {% endif %}
        {% if scholarship.region != 'all' %}
        <span class="inline-flex items-center px-4 py-2 bg-emerald-50 text-emerald-700 rounded-lg text-sm font-semibold border border-emerald-200">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            {{ scholarship.get_region_display }}
        </span>
        {% endif %}
    </div>
    
    <!-- Main Content -->
    <article class="bg-white rounded-xl shadow-lg border border-gray-200 p-8 md:p-10">
        <!-- Description Section -->
        <div class="mb-8">
            <div class="flex items-center mb-4">
                <div class="h-1 w-12 bg-cameroon-green rounded-full mr-4"></div>
                <h2 class="text-3xl font-bold text-gray-900">{% trans 'Description' %}</h2>
            </div>
            <div class="prose prose-lg max-w-none text-gray-700 leading-relaxed">
                {{ scholarship.description|linebreaks }}
            </div>
        </div>
        
        <div class="section-divider"></div>
        
        <!-- Eligibility Criteria Section -->
        <div class="mb-8">
            <div class="flex items-center mb-4">
                <div class="h-1 w-12 bg-cameroon-green rounded-full mr-4"></div>
                <h2 class="text-3xl font-bold text-gray-900">{% trans 'Eligibility Criteria' %}</h2>
            </div>
            <div class="prose prose-lg max-w-none text-gray-700 leading-relaxed">
                {{ scholarship.eligibility_criteria|linebreaks }}
            </div>
        </div>
        
        {% if scholarship.requirements_document %}
        <div class="section-divider"></div>
        
        <div class="mb-8">
            <div class="flex items-center mb-4">
                <div class="h-1 w-12 bg-cameroon-green rounded-full mr-4"></div>
                <h2 class="text-3xl font-bold text-gray-900">{% trans 'Requirements Document' %}</h2>
            </div>
            <a href="{{ scholarship.requirements_document.url }}" 
               target="_blank" 
               class="inline-flex items-center px-6 py-3 bg-cameroon-green text-white rounded-lg hover:bg-cameroon-green/90 font-semibold transition-all shadow-md hover:shadow-lg transform hover:scale-105">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
                {% trans 'Download Requirements PDF' %}
            </a>
        </div>
        {% endif %}
        
        {% if scholarship.application_url %}
        <div class="section-divider"></div>
        
        <div class="text-center pt-4">
            <a href="{{ scholarship.application_url }}" 
               target="_blank" 
               class="inline-flex items-center px-10 py-4 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-lg hover:from-emerald-700 hover:to-green-700 font-bold text-lg transition-all shadow-xl hover:shadow-2xl transform hover:scale-105">
                <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                {% trans 'Apply Now' %}
                <svg class="w-5 h-5 ml-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                </svg>
            </a>
        </div>
        {% endif %}
    </article>
</div>
{% endblock %}

