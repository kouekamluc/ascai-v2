{% load i18n %}
{% for event in events %}
<div class="bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition">
    {% if event.image %}
    <img src="{{ event.image.url }}" alt="{{ event.title }}" class="w-full h-48 object-cover">
    {% endif %}
    <div class="p-6">
        <div class="text-sm text-gray-500 mb-2">
            ğŸ“… {{ event.start_datetime|date:"d M Y, H:i" }}
        </div>
        <h3 class="text-xl font-semibold mb-2">
            <a href="{% url 'diaspora:event_detail' event.slug %}" class="hover:text-cameroon-green">
                {{ event.title }}
            </a>
        </h3>
        <p class="text-gray-600 mb-4">{{ event.description|truncatewords:15|striptags }}</p>
        {% if event.registration_required %}
        <span class="inline-block px-3 py-1 bg-cameroon-yellow/20 text-cameroon-yellow text-sm rounded-full border border-cameroon-yellow/30">
            {% trans 'Registration Required' %}
        </span>
        {% endif %}
    </div>
</div>
{% endfor %}

{% if has_more %}
<div 
    hx-get="{% url 'core:events_load_more' %}?offset={{ next_offset }}" 
    hx-trigger="revealed" 
    hx-swap="afterend"
    hx-indicator=".htmx-indicator"
    class="col-span-3"
>
    <!-- Auto-loads more events when scrolled into view -->
</div>
{% endif %}

